<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chimera Universe Portal</title>
<style>
  body { margin:0; padding:0; background: radial-gradient(circle, #00111f, #000000 80%); color: #e8f7ff; font-family: "Cinzel", serif; overflow: hidden; text-align: center; transition: background 2s ease; }
  #greeting-screen { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index:20; }
  #greeting-screen input { margin-top:20px; padding:10px 20px; border-radius:10px; border:none; font-size:1.2rem; }
  #begin-btn { margin-top:20px; padding:10px 30px; border-radius:20px; border:none; background:#4fd7ff; color:black; font-size:1.1rem; cursor:pointer; transition:0.3s; }
  #begin-btn:hover { background:#a8ecff; }
  .fade-text { opacity:0; transition: opacity 3s ease-in-out; font-size:1.6rem; padding:0 80px; }
  #lore-container { position:absolute; top:20%; left:50%; transform:translateX(-50%); width:80%; z-index:5; }
  .character-img { width:240px; opacity:0; transition: opacity 3s ease-in-out; margin-top:40px; }
  .subtitle { opacity:0; transition: opacity 3s ease-in-out; font-size:1.2rem; margin-top:10px; font-style: italic; }
  #portal { width:400px; height:400px; border-radius:50%; margin:40px auto 0; border:6px solid rgba(120,220,255,0.4); background: radial-gradient(circle, rgba(60,150,255,0.4), rgba(0,40,70,0.9)); box-shadow:0 0 40px #5bbcffaa, inset 0 0 40px #0c6daa; animation: spin 14s linear infinite; opacity:0; transition: opacity 3s ease-in-out, transform 2s ease-in-out; }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  #realmSelection { display:none; margin-top:40px; text-align:center; }
  .realm-btn { margin:5px; padding:10px 20px; border-radius:10px; border:none; background:#4fd7ff; cursor:pointer; transition:0.3s; }
  .realm-btn:hover { background:#a8ecff; }
</style>
</head>
<body>

<div id="greeting-screen">
  <h1>Welcome, Traveler</h1>
  <p>Please enter your Chimera Universe name:</p>
  <input id="username" />
  <button id="begin-btn">Begin</button>
</div>

<div id="lore-container"></div>
<div id="portal"></div>
<div id="realmSelection">
  <h2 class="realm-title">Choose Your Realm</h2>
  <p class="realm-sub">Where would you like to travel next, <span id='playerNameRealm'></span>?</p>
  <div class="realm-buttons" style="display:flex; gap:20px; justify-content:center; flex-wrap:wrap; margin-top:20px;">
    <button class="realm-btn" onclick="enterRealm('Star')">Realm of Star</button>
    <button class="realm-btn" onclick="enterRealm('Miki')">Realm of Miki</button>
    <button class="realm-btn" onclick="enterRealm('Chari')">Realm of Chari</button>
    <button class="realm-btn" onclick="enterRealm('Milo')">Realm of Milo</button>
    <button class="realm-btn" onclick="enterRealm('Hans')">Realm of Hans</button>
    <button class="realm-btn" onclick="enterRealm('Yeshua')">Realm of Yeshua</button>
  </div>
</div>

<audio id="theme" src="startheme.mp3"></audio>
<audio id="hum" src="mystical_hum.mp3" loop></audio>

<script>
let PLAYER = "";

const beginBtn = document.getElementById("begin-btn");
beginBtn.addEventListener('click', () => {
  const name = document.getElementById("username").value.trim() || "Traveler";
  PLAYER = name;
  document.getElementById("playerNameRealm").textContent = name;
  document.getElementById("greeting-screen").style.opacity = 0;
  setTimeout(() => {
    document.getElementById("greeting-screen").style.display = "none";
    startLore(name);
  }, 1000);
});

const characters = [
  { img: "star.png", haiku: "Starlight in her bones / Silent paws across the void / Destiny purrs soft." },
  { img: "Miki.png", haiku: "Ink-dream alchemist / Whispers drip into real worlds / Pages breathe her spells." },
  { img: "Chari.png", haiku: "Feathers guard the weak / Dawn rests between her footsteps / Mercy wears her face." },
  { img: "Milo.png", haiku: "Clockwork heart ticks hope / Lantern eyes map hidden paths / Courage hums in gears." },
  { img: "Hans.png", haiku: "Storm-forged wanderer / Ice melts where his laugh escapes / Thunder learns his name." },
  { img: "Yeshua.png", haiku: "Light in human shape / Every shadow bends to peace / Footsteps heal the air." }
];

function startLore(name){
  const loreContainer = document.getElementById("lore-container");
  const loreLines = [
    `In the beginning, the Celestial Loom spun the first threads of consciousness...`,
    `From its shimmer came the Chimera Children — beings of starfire and memory...`,
    `Each wandered through nebulae seeking identity, purpose, and silent truth...`,
    `And now, one awakens again — drawn here by destiny and forgotten echoes, ${name}...`
  ];
  let i = 0;
  function showNext(){
    if(i>=loreLines.length){ startCharacterSequence(); return; }
    loreContainer.innerHTML = `<div class='fade-text'>${loreLines[i]}</div>`;
    const el = loreContainer.firstChild;
    el.style.opacity = 1;
    setTimeout(()=>{
      el.style.opacity = 0;
      setTimeout(()=>{ i++; showNext(); }, 3000);
    }, 7000);
  }
  showNext();
}

function startCharacterSequence(){
  const loreContainer = document.getElementById("lore-container");
  let index = 0;
  function showNextChar(){
    if(index >= characters.length){ activatePortal(); return; }
    const c = characters[index];
    loreContainer.innerHTML = `<img class='character-img' src='${c.img}' /><div class='subtitle'>${c.haiku}</div>`;
    setTimeout(()=>{ index++; showNextChar(); }, 7000);
  }
  showNextChar();
}

function activatePortal(){
  const portal = document.getElementById("portal");
  portal.style.opacity = 1;
  document.getElementById("theme").play();
  document.getElementById("hum").play();
  setTimeout(()=>{ document.getElementById("realmSelection").style.display='block'; }, 2000);
}

function enterRealm(realm){
  const portal = document.getElementById("portal");
  portal.style.transform = "scale(1.2) rotate(360deg)";
  setTimeout(()=>{
    portal.style.transform = "scale(1) rotate(0deg)";
    loadRealm(realm);
  }, 2000);
}

function loadRealm(realm){
  document.body.style.background = {
    'Star':'radial-gradient(circle, #001122, #000000)',
    'Miki':'radial-gradient(circle, #112211, #000000)',
    'Chari':'radial-gradient(circle, #331122, #000000)',
    'Milo':'radial-gradient(circle, #222233, #000000)',
    'Hans':'radial-gradient(circle, #111144, #000000)',
    'Yeshua':'radial-gradient(circle, #441111, #000000)'
  }[realm] || '#000000';

  const sound = new Audio(`${realm.toLowerCase()}_ambient.mp3`);
  sound.loop = true;
  sound.volume = 0.3;
  sound.play();

  const loreContainer = document.getElementById("lore-container");
  loreContainer.innerHTML = `<div class='fade-text'>Welcome to the Realm of ${realm}, ${PLAYER}...</div>`;
  setTimeout(()=> loreContainer.firstChild.style.opacity=1, 100);
}
</script>

</body>
</html>
