<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mystical Portal Activation</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        background: #05060a;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        font-family: "Cinzel", serif;
        color: #d8ecff;
    }

    /* Fade-in / fade-out lore text */
    #loreContainer {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        width: 70%;
        text-align: center;
        font-size: 20px;
        line-height: 1.6;
        opacity: 0;
        pointer-events: none;
    }

    .fade {
        animation: fadeInOut 18s ease-in-out forwards; /* Increased duration */
    }

    @keyframes fadeInOut {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; }
    }

    /* Monitor frame */
    .monitor {
        width: 540px;
        height: 400px;
        background: radial-gradient(circle at center,
            rgba(60, 140, 180, 0.25),
            rgba(20, 60, 90, 0.60),
            rgba(10, 20, 30, 0.85)
        );
        border: 4px solid #7ccfff;
        border-radius: 16px;
        padding: 26px;
        box-shadow: 0 0 20px rgba(140,200,255,0.4),
                    inset 0 0 30px rgba(80,150,220,0.7);
        display: none;
        position: relative;
        z-index: 5;
    }

    #imgContainer {
        width: 100%;
        height: 240px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #imgContainer img {
        max-height: 100%;
        filter: drop-shadow(0 0 10px #6ac9ff);
    }

    /* Loading bar */
    .loading-shell {
        width: 100%;
        height: 22px;
        border: 2px solid #b5e9ff;
        border-radius: 6px;
        padding: 2px;
    }

    .loading-bar {
        height: 100%;
        width: 0%;
        border-radius: 4px;
        background: linear-gradient(to right,
            #d4f6ff,#8ad9ff,#4fbaf0
        );
        box-shadow: 0 0 10px rgba(120,200,255,0.7);
        transition: width 0.35s ease-in-out;
    }

    .loading-text {
        margin-top: 12px;
        text-align: center;
        font-size: 14px;
        opacity: 0.85;
    }

    /* Portal */
    #portal {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        margin: 20px auto 0;
        display: none;
        background: radial-gradient(circle,
            rgba(200,230,255,0.85),
            rgba(120,150,255,0.35),
            rgba(40,60,100,0.1)
        );
        box-shadow: 0 0 30px rgba(130,170,255,0.9),
                    0 0 60px rgba(90,140,255,0.6);
        animation: portalPulse 3s infinite ease-in-out;
    }

    @keyframes portalPulse {
        0% { transform: scale(1); opacity: 0.8; }
        50% { transform: scale(1.08); opacity: 1; }
        100% { transform: scale(1); opacity: 0.8; }
    }

    /* Whisper subtitle */
    #whisper {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 15px;
        color: #f0faff;
        opacity: 0;
        letter-spacing: 1px;
        font-style: italic;
        font-family: "Cormorant Garamond", serif;
        text-shadow: 0 0 10px #9ed0ff;
    }

    @keyframes whisperFade {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; }
    }
</style>
</head>

<body>

<!-- LORE SEQUENCE -->
<div id="loreContainer"></div>

<!-- MONITOR -->
<div class="monitor" id="monitor">

    <div id="imgContainer">
        <img id="mainImg" src="star.png" alt="">
    </div>

    <div class="loading-shell">
        <div class="loading-bar" id="loader"></div>
    </div>
    <div class="loading-text" id="loadingText">INITIATING...</div>

    <div id="portal"></div>

    <div id="whisper"></div>
</div>


<!-- AUDIO -->
<audio id="ambientChimes" src="gentlechimes.mp3" loop></audio>
<audio id="finalSong" src="startheme.mp3"></audio>

<script>
/* =============== 1. LORE SEQUENCE =============== */

const lore = [
    "Long before the realms were charted, before names were spoken into starlight, there drifted a solitary watcher.",
    "A keeper of hidden paths, walking the edges of dream and memory.",
    "Her lavender throne waited in the quiet dusk, untouched by time or sorrow.",
    "Tonight, the silent starwinds return her steps to us..."
];

const loreBox = document.getElementById("loreContainer");

let loreIndex = 0;

function playLore() {
    loreBox.innerHTML = lore[loreIndex];
    loreBox.classList.remove("fade");
    void loreBox.offsetWidth; 
    loreBox.classList.add("fade");

    loreIndex++;

    if (loreIndex < lore.length) {
        setTimeout(playLore, 18000); // extended duration per paragraph
    } else {
        setTimeout(startBootSequence, 2000);
    }
}

playLore();


/* =============== 2. BOOT SEQUENCE =============== */

const monitor = document.getElementById("monitor");
const loader = document.getElementById("loader");
const loadingText = document.getElementById("loadingText");
const chimes = document.getElementById("ambientChimes");
const song = document.getElementById("finalSong");

function startBootSequence() {
    loreBox.style.display = "none";
    monitor.style.display = "block";
    chimes.volume = 0.15;
    chimes.play().catch(()=>{});
    boot();
}

let progress = 0;

function boot() {
    if (progress < 100) {
        progress += 1;
        loader.style.width = progress + "%";

        if (progress < 40)
            loadingText.innerText = "HARMONIZING AETHER...";
        else if (progress < 70)
            loadingText.innerText = "STARHEART LISTENING...";
        else if (progress < 90)
            loadingText.innerText = "ALIGNING QUIET GATES...";
        else
            loadingText.innerText = "SOFTENING THE VEIL...";

        setTimeout(boot, 120);
    } else {
        openPortal();
    }
}


/* =============== 3. PORTAL ACTIVATION =============== */

const portal = document.getElementById("portal");
const mainImg = document.getElementById("mainImg");

function openPortal() {
    loadingText.innerText = "THE PATHWAY OPENS.";
    portal.style.display = "block";

    let fade = setInterval(() => {
        if (chimes.volume > 0.01) chimes.volume -= 0.01;
        else { clearInterval(fade); chimes.pause(); }
    }, 200);

    setTimeout(() => {
        song.volume = 0.6;
        song.play();
    }, 2000);  // music starts exactly 2 seconds after loading completes

    setTimeout(startImageCycle, 1500);
}


/* =============== 4. MOVING PICTURE SEQUENCE + HAIKU WHISPERS =============== */

const whisperBox = document.getElementById("whisper");

const frames = [
    {img: "star.png",    haiku: "Her light blooms softly,\nThrough quiet celestial gates—\nThe watcher returns."},
    {img: "Miki.png",    haiku: "Ink of moonlit winds,\nMiki dances between shadows—\nA smile in motion."},
    {img: "Chari.png",   haiku: "Laughter like soft bells,\nChari threads joy through the dusk—\nWarmth in every step."},
    {img: "Milo.png",    haiku: "Gentle as starlight,\nMilo weaves calm into storms—\nStillness in his paws."},
    {img: "Hans.png",    haiku: "Ancient eyes shimmer,\nHans carries forgotten truths—\nOld stars know his name."},
    {img: "Yeshua.png",  haiku: "Across endless night,\nYeshua’s flame guides the lost—\nHope in quiet breath."}
];

let i = 0;

function startImageCycle() {
    cycleFrame();
    setInterval(cycleFrame, 6500);
}

function cycleFrame() {
    mainImg.src = frames[i].img;

    whisperBox.style.opacity = 0;
    whisperBox.style.animation = "none";
    void whisperBox.offsetWidth;

    whisperBox.innerText = frames[i].haiku;
    whisperBox.style.animation = "whisperFade 6.5s ease-in-out forwards";

    i = (i + 1) % frames.length;
}

</script>

</body>
</html>
